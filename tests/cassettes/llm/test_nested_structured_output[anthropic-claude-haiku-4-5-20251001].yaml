interactions:
  - request:
      body: '{"max_tokens":8192,"messages":[{"role":"user","content":"Create a profile for Sarah, age 35, who works as a doctor. Also provide a one-sentence summary about her."}],"model":"claude-haiku-4-5-20251001","system":"You must respond with valid JSON that matches this schema:\n```json\n{\n  \"$defs\": {\n    \"PersonInfo\": {\n      \"description\": \"Person information model.\",\n      \"properties\": {\n        \"name\": {\n          \"title\": \"Name\",\n          \"type\": \"string\"\n        },\n        \"age\": {\n          \"maximum\": 150,\n          \"minimum\": 0,\n          \"title\": \"Age\",\n          \"type\": \"integer\"\n        },\n        \"occupation\": {\n          \"anyOf\": [\n            {\n              \"type\": \"string\"\n            },\n            {\n              \"type\": \"null\"\n            }\n          ],\n          \"default\": null,\n          \"title\": \"Occupation\"\n        }\n      },\n      \"required\": [\n        \"name\",\n        \"age\"\n      ],\n      \"title\": \"PersonInfo\",\n      \"type\": \"object\"\n    }\n  },\n  \"description\": \"Response with nested model.\",\n  \"properties\": {\n    \"person\": {\n      \"$ref\": \"#/$defs/PersonInfo\"\n    },\n    \"summary\": {\n      \"title\": \"Summary\",\n      \"type\": \"string\"\n    }\n  },\n  \"required\": [\n    \"person\",\n    \"summary\"\n  ],\n  \"title\": \"NestedResponse\",\n  \"type\": \"object\"\n}\n```\n\nRespond ONLY with the JSON object, no additional text or markdown."}'
      headers:
        accept:
          - application/json
        accept-encoding:
          - gzip, deflate
        anthropic-version:
          - '2023-06-01'
        connection:
          - keep-alive
        content-length:
          - '1508'
        content-type:
          - application/json
        host:
          - api.anthropic.com
        user-agent:
          - AsyncAnthropic/Python 0.79.0
        x-stainless-arch:
          - arm64
        x-stainless-async:
          - async:asyncio
        x-stainless-lang:
          - python
        x-stainless-os:
          - Linux
        x-stainless-package-version:
          - 0.79.0
        x-stainless-read-timeout:
          - '600'
        x-stainless-retry-count:
          - '0'
        x-stainless-runtime:
          - CPython
        x-stainless-runtime-version:
          - 3.13.9
        x-stainless-timeout:
          - '600'
      method: POST
      uri: https://api.anthropic.com/v1/messages
    response:
      body:
        string: !!binary |
          H4sIAAAAAAAA/3WSQW/bMAyF/4qgsz3YSY0Mvu3Q005rdyhQDwonsbEaWfIkqlsQ+L+Pcpat29CT
          pPc9kXgEz3IKBp3spXaQDdYj2GOub+qu3jSbrm2aVlbSGjZM6aCa9rZtP+5uPj1tdL47dtsP9Lyh
          h8/sodOMxYUpwQFZiMEVAVKyicATSzp4Qr71j+ern/BHIevRy/1+/5yCH/x58EIMcsZYnrIXq1Ak
          DxMWYZD3EGEcZHUl3LaAbfdbCVrnGcheSgzSBE0hDrLwpbq0SHmaIJ5elRQ2CeAy9Qkh1sEZcfkn
          vlsamUxorAYnNETEKMz6JDSCghgRHI2FCPBGlOYceLW+K32XwXNGuXypZKIwq4jAATk5eqMoRy9/
          gYTfMnrNI/LZuUrmdar9WVo/Z1IUjuiT7Le79zxW0CMqzbVKVPW3o7lyxuYtdv1bGuA84oQRnOqm
          //1/aDv+S5dKhkyvpV3LcTC+WI2KJxE5aNkFA9GUtfJPGEtIdcDAyAdS8ALWwVdenWX5CaxVakWd
          AgAA
      headers:
        CF-RAY:
          - 9ce27c740904d266-FRA
        Connection:
          - keep-alive
        Content-Encoding:
          - gzip
        Content-Security-Policy:
          - default-src 'none'; frame-ancestors 'none'
        Content-Type:
          - application/json
        Date:
          - Sun, 15 Feb 2026 05:43:11 GMT
        Server:
          - cloudflare
        Transfer-Encoding:
          - chunked
        X-Robots-Tag:
          - none
        anthropic-organization-id:
          - 47b93e1d-acf2-4be5-b32d-1716b0cff224
        anthropic-ratelimit-input-tokens-limit:
          - '50000'
        anthropic-ratelimit-input-tokens-remaining:
          - '50000'
        anthropic-ratelimit-input-tokens-reset:
          - '2026-02-15T05:43:11Z'
        anthropic-ratelimit-output-tokens-limit:
          - '10000'
        anthropic-ratelimit-output-tokens-remaining:
          - '10000'
        anthropic-ratelimit-output-tokens-reset:
          - '2026-02-15T05:43:11Z'
        anthropic-ratelimit-requests-limit:
          - '50'
        anthropic-ratelimit-requests-remaining:
          - '48'
        anthropic-ratelimit-requests-reset:
          - '2026-02-15T05:43:12Z'
        anthropic-ratelimit-tokens-limit:
          - '60000'
        anthropic-ratelimit-tokens-remaining:
          - '60000'
        anthropic-ratelimit-tokens-reset:
          - '2026-02-15T05:43:11Z'
        cf-cache-status:
          - DYNAMIC
        request-id:
          - req_011CY9KdBnrNGLQwJhKJSMDS
        strict-transport-security:
          - max-age=31536000; includeSubDomains; preload
        x-envoy-upstream-service-time:
          - '833'
      status:
        code: 200
        message: OK
version: 1
