{
  "replay_id": "integration.llm.test_streaming/test_streaming_with_tool_calls_gemini[google-gemini-2.5-flash]/mldev",
  "interactions": [
    {
      "request": {
        "method": "post",
        "url": "{MLDEV_URL_PREFIX}/models/gemini-2.5-flash:streamGenerateContent?alt=sse",
        "headers": {
          "Content-Type": "application/json",
          "x-goog-api-key": "{REDACTED}",
          "user-agent": "google-genai-sdk/{VERSION_NUMBER} {LANGUAGE_LABEL}/{VERSION_NUMBER}",
          "x-goog-api-client": "google-genai-sdk/{VERSION_NUMBER} {LANGUAGE_LABEL}/{VERSION_NUMBER}"
        },
        "body_segments": [
          {
            "contents": [
              {
                "parts": [
                  {
                    "text": "What's the weather in Paris, France? Also calculate 42 * 17."
                  }
                ],
                "role": "user"
              }
            ],
            "tools": [
              {
                "functionDeclarations": [
                  {
                    "description": "Get current weather for a location",
                    "name": "get_weather",
                    "parameters": {
                      "properties": {
                        "location": {
                          "description": "The city and country",
                          "type": "STRING"
                        },
                        "unit": {
                          "description": "Temperature unit",
                          "type": "STRING"
                        }
                      },
                      "required": [
                        "location"
                      ],
                      "type": "OBJECT"
                    }
                  },
                  {
                    "description": "Perform mathematical calculations",
                    "name": "calculate",
                    "parameters": {
                      "properties": {
                        "expression": {
                          "description": "Mathematical expression to evaluate",
                          "type": "STRING"
                        }
                      },
                      "required": [
                        "expression"
                      ],
                      "type": "OBJECT"
                    }
                  }
                ]
              }
            ],
            "generationConfig": {
              "mediaResolution": "MEDIA_RESOLUTION_HIGH"
            }
          }
        ]
      },
      "response": {
        "status_code": 200,
        "headers": {
          "Content-Type": "text/event-stream",
          "Content-Disposition": "attachment",
          "Vary": "Origin, X-Origin, Referer",
          "Transfer-Encoding": "chunked",
          "Server": "scaffolding on HTTPServer2",
          "X-XSS-Protection": "0",
          "X-Frame-Options": "SAMEORIGIN",
          "X-Content-Type-Options": "nosniff",
          "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
        },
        "body_segments": [
          {
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "functionCall": {
                        "name": "get_weather",
                        "args": {
                          "location": "Paris, France"
                        }
                      },
                      "thoughtSignature": "CiQBcsjafI6JVWdZjI8JQn0jT3n8VKzHHMg/Vui5pj8GPeh2w/YKZgFyyNp8s1sJ2eTSWo42EPI33xTbOXi7W1fAV2PeCF0ESW/VXVXjVdWTyt4v3vQk2uQXWScuuW/L8GBRDf3bB+hJA2Wqqw9+e4eNApkQEMN+sRohD1OITQ/AYcox5NAUYHrIa3BiQArcAQFyyNp8r44+oYzpdW55K9etrSEY9lKt3ZfrcKS7EBaVteGu7kje7KWhYPCMrEX8LqICerDvfkSF/KaKWqjamCA+gnSxM/60nfnG4FUClU9qmr9/HmqdiaWu/d4OoBvCtfBqBIM3Syoar5+Ud7VJS6es0eYgGS3eZryjvD/ZfrQIH6Ycai8uYCsb4mi4LK06ZUzksle5li7wMAOPq4C+N+Oia7gOwCVfzXqlV3VdOxqMQCGWVg4EKAaCGXoJe8gcnVL1wSJekWbllfb4WaM9UMFceEE+r3rrxX5WiCwK2gEBcsjafDkQ0sOP+Yc8M/RoE+DBcv2YysziC+q/NPLjeJnMKwfMPX/mU697VY/nExjlprNW3nQ0u2UdzrQTcpfPe59WlxjkmVOJ0UGTKNkAigN7I3l2NTt42ewAGdZRLulpGqmJpuwuaBjMS1k3oK68kpz3Sk8Py8eZkgKqAHjMJeRnzR9f3PN0K2ba+RIdce6ZR+mo1wHsBxuTHIfggWbWj79HLKfSms1W77mXk9cHFV8BdqS6Fy1jXESTaGTrzRCmpQXUbh23VXhnTcA2gHyW9IYBlq2pjX+Irw=="
                    },
                    {
                      "functionCall": {
                        "name": "calculate",
                        "args": {
                          "expression": "42 * 17"
                        }
                      }
                    }
                  ],
                  "role": "model"
                },
                "finishReason": "STOP",
                "index": 0,
                "finishMessage": "Model generated function call(s)."
              }
            ],
            "usageMetadata": {
              "promptTokenCount": 114,
              "candidatesTokenCount": 35,
              "totalTokenCount": 266,
              "promptTokensDetails": [
                {
                  "modality": "TEXT",
                  "tokenCount": 114
                }
              ],
              "thoughtsTokenCount": 117
            },
            "modelVersion": "gemini-2.5-flash",
            "responseId": "oaxCaZS_F9m1nsEP7JnkiQU"
          }
        ],
        "byte_segments": [],
        "sdk_response_segments": [
          {
            "sdk_http_response": {
              "headers": {
                "Content-Type": "text/event-stream",
                "Content-Disposition": "attachment",
                "Vary": "Origin, X-Origin, Referer",
                "Transfer-Encoding": "chunked",
                "Server": "scaffolding on HTTPServer2",
                "X-XSS-Protection": "0",
                "X-Frame-Options": "SAMEORIGIN",
                "X-Content-Type-Options": "nosniff",
                "Alt-Svc": "h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000"
              }
            },
            "candidates": [
              {
                "content": {
                  "parts": [
                    {
                      "function_call": {
                        "args": {
                          "location": "Paris, France"
                        },
                        "name": "get_weather"
                      },
                      "thought_signature": "CiQBcsjafI6JVWdZjI8JQn0jT3n8VKzHHMg_Vui5pj8GPeh2w_YKZgFyyNp8s1sJ2eTSWo42EPI33xTbOXi7W1fAV2PeCF0ESW_VXVXjVdWTyt4v3vQk2uQXWScuuW_L8GBRDf3bB-hJA2Wqqw9-e4eNApkQEMN-sRohD1OITQ_AYcox5NAUYHrIa3BiQArcAQFyyNp8r44-oYzpdW55K9etrSEY9lKt3ZfrcKS7EBaVteGu7kje7KWhYPCMrEX8LqICerDvfkSF_KaKWqjamCA-gnSxM_60nfnG4FUClU9qmr9_HmqdiaWu_d4OoBvCtfBqBIM3Syoar5-Ud7VJS6es0eYgGS3eZryjvD_ZfrQIH6Ycai8uYCsb4mi4LK06ZUzksle5li7wMAOPq4C-N-Oia7gOwCVfzXqlV3VdOxqMQCGWVg4EKAaCGXoJe8gcnVL1wSJekWbllfb4WaM9UMFceEE-r3rrxX5WiCwK2gEBcsjafDkQ0sOP-Yc8M_RoE-DBcv2YysziC-q_NPLjeJnMKwfMPX_mU697VY_nExjlprNW3nQ0u2UdzrQTcpfPe59WlxjkmVOJ0UGTKNkAigN7I3l2NTt42ewAGdZRLulpGqmJpuwuaBjMS1k3oK68kpz3Sk8Py8eZkgKqAHjMJeRnzR9f3PN0K2ba-RIdce6ZR-mo1wHsBxuTHIfggWbWj79HLKfSms1W77mXk9cHFV8BdqS6Fy1jXESTaGTrzRCmpQXUbh23VXhnTcA2gHyW9IYBlq2pjX-Irw=="
                    },
                    {
                      "function_call": {
                        "args": {
                          "expression": "42 * 17"
                        },
                        "name": "calculate"
                      }
                    }
                  ],
                  "role": "model"
                },
                "finish_reason": "STOP",
                "index": 0
              }
            ],
            "model_version": "gemini-2.5-flash",
            "response_id": "oaxCaZS_F9m1nsEP7JnkiQU",
            "usage_metadata": {
              "candidates_token_count": 35,
              "prompt_token_count": 114,
              "prompt_tokens_details": [
                {
                  "modality": "TEXT",
                  "token_count": 114
                }
              ],
              "thoughts_token_count": 117,
              "total_token_count": 266
            }
          }
        ]
      }
    }
  ]
}