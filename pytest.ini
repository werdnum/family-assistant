[pytest]
asyncio_default_fixture_loop_scope = function
asyncio_mode = auto
markers =
    postgres: marks tests as requiring PostgreSQL database
    llm_integration: marks tests as LLM provider integration tests (require API keys for recording)
    no_db: marks tests as not requiring database setup
# Default to 3 workers to avoid OOM issues (was -n auto)
addopts = -n3
filterwarnings =
    # Ignore deprecation warnings from dependencies
    ignore:'crypt' is deprecated:DeprecationWarning:passlib
    ignore:Support for class-based `config` is deprecated:DeprecationWarning:pydantic
    ignore:Valid config keys have changed in V2:UserWarning:pydantic
    ignore:There is no current event loop:DeprecationWarning:litellm
    ignore:Couldn't find ffmpeg or avconv:RuntimeWarning:pydub
    ignore:websockets.legacy is deprecated:DeprecationWarning:websockets
    ignore:websockets.server.WebSocketServerProtocol is deprecated:DeprecationWarning:uvicorn
    ignore:The `name` is not the first parameter anymore:DeprecationWarning:starlette
    ignore:No path_separator found in configuration:DeprecationWarning:alembic
