[pytest]
asyncio_default_test_loop_scope = session
python_files = tests.py test_*.py *_test.py
python_classes = Test
python_functions = test
asyncio_default_fixture_loop_scope = session
asyncio_mode = auto
timeout = 300
timeout_method = thread
markers =
    postgres: marks tests as requiring PostgreSQL database
    llm_integration: marks tests as LLM provider integration tests (require API keys for recording)
    no_db: marks tests as not requiring database setup
    playwright: marks tests as requiring playwright
    no_vcr: marks tests to bypass VCR.py (useful for streaming tests incompatible with VCR)
    gemini_live: marks tests that require live Gemini API access
addopts = -n 4 -m "not gemini_live"
filterwarnings =
    # Ignore deprecation warnings from dependencies
    ignore:'crypt' is deprecated:DeprecationWarning:passlib
    ignore:Support for class-based `config` is deprecated:DeprecationWarning:pydantic
    ignore:Valid config keys have changed in V2:UserWarning:pydantic
    ignore:There is no current event loop:DeprecationWarning:litellm
    ignore:Couldn't find ffmpeg or avconv:RuntimeWarning:pydub
    ignore:websockets.legacy is deprecated:DeprecationWarning:websockets
    ignore:websockets.server.WebSocketServerProtocol is deprecated:DeprecationWarning:uvicorn
    ignore:The `name` is not the first parameter anymore:DeprecationWarning:starlette
    ignore:No path_separator found in configuration:DeprecationWarning:alembic
